# –ò–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è (i18n) –¥–ª—è TMB Bot

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
locales/
‚îú‚îÄ‚îÄ messages.pot          # –®–∞–±–ª–æ–Ω –ø–µ—Ä–µ–≤–æ–¥–æ–≤ (–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
‚îú‚îÄ‚îÄ en/
‚îÇ   ‚îî‚îÄ‚îÄ LC_MESSAGES/
‚îÇ       ‚îú‚îÄ‚îÄ messages.po   # –ü–µ—Ä–µ–≤–æ–¥—ã –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π
‚îÇ       ‚îú‚îÄ‚îÄ messages.mo   # –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–≤–æ–¥—ã
‚îÇ       ‚îî‚îÄ‚îÄ messages.ftl  # Fluent –ø–µ—Ä–µ–≤–æ–¥—ã
‚îî‚îÄ‚îÄ ru/
    ‚îî‚îÄ‚îÄ LC_MESSAGES/
        ‚îú‚îÄ‚îÄ messages.po   # –ü–µ—Ä–µ–≤–æ–¥—ã –Ω–∞ —Ä—É—Å—Å–∫–∏–π
        ‚îú‚îÄ‚îÄ messages.mo   # –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–≤–æ–¥—ã
        ‚îî‚îÄ‚îÄ messages.ftl  # Fluent –ø–µ—Ä–µ–≤–æ–¥—ã
```

## –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–µ—Ä–µ–≤–æ–¥–∞–º–∏

### 1. –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫ –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞
```bash
pybabel extract -F babel.cfg -k _ -o locales/messages.pot .
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —è–∑—ã–∫–∞
```bash
pybabel init -i locales/messages.pot -d locales -l <—è–∑—ã–∫>
```
–ü—Ä–∏–º–µ—Ä: `pybabel init -i locales/messages.pot -d locales -l de` (–¥–ª—è –Ω–µ–º–µ—Ü–∫–æ–≥–æ)

### 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–µ—Ä–µ–≤–æ–¥–æ–≤
```bash
pybabel update -i locales/messages.pot -d locales
```

### 4. –ö–æ–º–ø–∏–ª—è—Ü–∏—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤
```bash
pybabel compile -d locales
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–¥–µ

### –í –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞—Ö
```python
from aiogram.utils.i18n import gettext as _

# –ü—Ä–æ—Å—Ç–æ–π –ø–µ—Ä–µ–≤–æ–¥
message = _("hello")

# –° –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ format)
message = _("user-greeting").format(name=user.name)
```

### –í –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞—Ö
```python
from aiogram.utils.i18n import gettext as _

button = InlineKeyboardButton(
    text=_("add-group"),
    callback_data="add_group"
)
```

## –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —è–∑—ã–∫–∞

1. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π —è–∑—ã–∫:
   ```bash
   pybabel init -i locales/messages.pot -d locales -l <–∫–æ–¥_—è–∑—ã–∫–∞>
   ```

2. –ü–µ—Ä–µ–≤–µ–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫–∏ –≤ —Ñ–∞–π–ª–µ `locales/<–∫–æ–¥_—è–∑—ã–∫–∞>/LC_MESSAGES/messages.po`

3. –°–∫–æ–º–ø–∏–ª–∏—Ä—É–π—Ç–µ –ø–µ—Ä–µ–≤–æ–¥—ã:
   ```bash
   pybabel compile -d locales
   ```

4. –î–æ–±–∞–≤—å—Ç–µ —è–∑—ã–∫ –≤ —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —è–∑—ã–∫–æ–≤ –≤ –∫–æ–¥–µ –±–æ—Ç–∞

## –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —è–∑—ã–∫–∏

- üá∑üá∫ –†—É—Å—Å–∫–∏–π (ru) - –æ—Å–Ω–æ–≤–Ω–æ–π —è–∑—ã–∫
- üá∫üá∏ –ê–Ω–≥–ª–∏–π—Å–∫–∏–π (en)

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –§–∞–π–ª—ã `.mo` –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏ –Ω–µ –¥–æ–ª–∂–Ω—ã —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤—Ä—É—á–Ω—É—é
- –§–∞–π–ª—ã `.po` —Å–æ–¥–µ—Ä–∂–∞—Ç –ø–µ—Ä–µ–≤–æ–¥—ã –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É—é—Ç—Å—è –≤—Ä—É—á–Ω—É—é
- –§–∞–π–ª `.pot` - —ç—Ç–æ —à–∞–±–ª–æ–Ω, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∏–∑ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç–º–æ–¥–∑–∏ –≤ –ø–µ—Ä–µ–≤–æ–¥–∞—Ö –¥–ª—è –ª—É—á—à–µ–≥–æ UX
- –í—Å–µ–≥–¥–∞ –∫–æ–º–ø–∏–ª–∏—Ä—É–π—Ç–µ –ø–µ—Ä–µ–≤–æ–¥—ã –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π